---
title: Übung B
output: 
  distill::distill_article:
    toc: true
categories:
- PrePro2
author:
  - name: Patrick Laube
  - name: Nils Ratnaweera
  - name: Nikolaos Bakogiannis
preview: sensor.jpg # https://commons.wikimedia.org/wiki/File:SparkFun_Humidity_and_Temperature_Sensor_Breakout_-_HIH6130_11295-01.jpg
---



```{r,message=F}
library(dplyr)
library(readr)
library(lubridate)
library(stringr)
```



## Aufgabe 1

Gegeben sind die Daten von drei Sensoren ([sensor1.csv](https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor1.csv), [sensor2.csv](https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor2.csv), [sensor3.csv](https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor3.csv)). Lade die Datensätze runter und lese sie ein.



```{r, message=F}
# Lösung Aufgabe 1

sensor1 <- read_delim("https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor1.csv",";")
sensor2 <- read_delim("https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor2.csv",";")
sensor3 <- read_delim("https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor3.csv",";")

```

## Aufgabe 2

Erstelle aus den 3 Dataframes eine einzige Dataframe, die aussieht wie unten dargestellt. Nutze dafür einen `*_join()` aus `dplyr`. Um 3 `data.frames` miteinander zu verbinden brauchst du 2 `joins`. Bereinige im Anschluss die Spaltennamen ([wie geht das?](https://www.statology.org/how-to-rename-data-frame-columns-in-r/)).


```{r}

# Lösung Aufgabe 2

sensor1_2 <- full_join(sensor1, sensor2, "Datetime")

sensor_all <- full_join(sensor1_2, sensor3, by = "Datetime")

names(sensor_all) <- c("Datetime","sensor1","sensor2","sensor3")
```


```{r,  echo = F, eval = T, purl=F}
knitr::kable(sensor_all)
```


## Aufgabe 3

Importiere die Datei [sensor_1_fail.csv](https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor_fail.csv) in `R`.


```{r, message = F}

# Lösung Aufgabe 3

sensor_fail <- read_delim("https://github.com/ResearchMethods-ZHAW/datasets/raw/main/prepro/sensor_fail.csv", delim = ";")

```


```{r,  echo = F, eval = T, purl=F}
knitr::kable(sensor_fail)
```


`sensor_fail.csv` hat eine Variabel `SensorStatus`: `1` bedeutet der Sensor misst, `0` bedeutet der Sensor miss nicht. Fälschlicherweise wurde auch dann der Messwert `Temp = 0` erfasst, wenn `Sensorstatus = 0`. Richtig wäre hier `NA` (not available). Korrigiere den Datensatz entsprechend.


```{r}
sensor_fail$Temp[sensor_fail$SensorStatus == 0] <- NA
```


## Aufgabe 4


Warum spielt das es eine Rolle, ob `0` oder `NA` erfasst wird? Berechne die Mittlere der Temperatur / Feuchtigkeit nach der Korrektur. 

```{r}

# Lösung Aufgabe 4

# Mittelwerte der korrigierten Sensordaten: mit na.rm = TRUE werden NA-Werte aus der Berechnung entfernt. 
# Ansonsten würden sie als 0 in die Berechnung einfliessen und diese verfälschen.
mean(sensor_fail$Temp, na.rm = TRUE)

```





