[
  {
    "path": "infovis/InfoVis1-Demo-EDA/",
    "title": "EDA Beispiel Vorlesung",
    "description": {},
    "author": [],
    "date": "2021-08-19",
    "categories": [
      "InfoVis1",
      "InfoVis"
    ],
    "contents": "\n\n\n\nDemoscript als Download\n\n\nlibrary(tidyverse)\nlibrary(scales)\n\n# create some data about age and height of people\npeople <- data.frame(\n  ID = c(1:30),\n  \n  age = c(5.0, 7.0, 6.5 ,9.0, 8.0, 5.0, 8.6, 7.5, 9.0, 6.0,\n          63.5 ,65.7, 57.6, 98.6, 76.5, 78.0, 93.4, 77.5, 256.6, 512.3,\n          15.5, 18.6, 18.5, 22.8, 28.5, 39.5, 55.9, 50.3, 31.9, 41.3),\n  \n  height = c(0.85, 0.93, 1.1, 1.25, 1.33, 1.17, 1.32, 0.82, 0.89, 1.13,\n             1.62, 1.87, 1.67, 1.76, 1.56, 1.71, 1.65, 1.55, 1.87, 1.69,\n             1.49, 1.68, 1.41, 1.55, 1.84, 1.69, 0.85, 1.65, 1.94, 1.80),\n  \n  weight = c(45.5, 54.3, 76.5, 60.4, 43.4, 36.4, 50.3, 27.8, 34.7, 47.6,\n             84.3, 90.4, 76.5, 55.6, 54.3, 83.2, 80.7, 55.6, 87.6, 69.5,\n             48.0, 55.6, 47.6, 60.5, 54.3, 59.5, 34.5, 55.4, 100.4, 110.3)\n)\n\n\n\n# build a scatterplot for a first inspection\nggplot(people, aes(x=age, y=height)) + geom_point() + scale_y_continuous(limits=c(0.75, 2.0))\n\n\n\n# Go to help page: http://docs.ggplot2.org/current/ -> Search for icon of fit-line\n# http://docs.ggplot2.org/current/geom_smooth.html\n\n# build a scatterplot for a first inspection, with regression line\nggplot(people, aes(x=age, y=height)) + \n  geom_point() + \n  scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"loess\", fill='lightblue', size=0.5, alpha=0.5)\n\n\n\n?stem\n\n# stem and leaf plot\nstem(people$height)\n\n\n\n  The decimal point is 1 digit(s) to the left of the |\n\n   8 | 25593\n  10 | 037\n  12 | 523\n  14 | 19556\n  16 | 255789916\n  18 | 04774\n\nstem(people$height, scale=2)\n\n\n\n  The decimal point is 1 digit(s) to the left of the |\n\n   8 | 2559\n   9 | 3\n  10 | \n  11 | 037\n  12 | 5\n  13 | 23\n  14 | 19\n  15 | 556\n  16 | 2557899\n  17 | 16\n  18 | 0477\n  19 | 4\n\n# explore the two variables with box-whiskerplots\nsummary(people$age)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   5.00    8.70   30.20   59.14   65.15  512.30 \n\nboxplot(people$age)\n\n\n\nsummary(people$height)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.820   1.190   1.555   1.455   1.690   1.940 \n\nboxplot(people$height)\n\n\n\n# boxplot(people$height) why twice the same\n\n\n# explore data with a histgram\nggplot(people, aes(x=age)) + \n  geom_histogram(stat=\"bin\", fill='green', binwidth=20)  \n\n\n\ndensity(x = people$height)\n\n\n\nCall:\n    density.default(x = people$height)\n\nData: people$height (30 obs.);  Bandwidth 'bw' = 0.1576\n\n       x                y           \n Min.   :0.3472   Min.   :0.001593  \n 1st Qu.:0.8636   1st Qu.:0.102953  \n Median :1.3800   Median :0.510601  \n Mean   :1.3800   Mean   :0.483553  \n 3rd Qu.:1.8964   3rd Qu.:0.722660  \n Max.   :2.4128   Max.   :1.216350  \n\n# re-expression: use log or sqrt axes\n#\n# Find here guideline about scaling axes \n# http://www.cookbook-r.com/Graphs/Axes_(ggplot2)/\n# http://docs.ggplot2.org/0.9.3.1/scale_continuous.html\n\n\n# logarithmic axis: respond to skewness in the data, e.g. log10 \nggplot(people, aes(x=age, y=height)) + \n  geom_point() + \n  scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"lm\", fill='lightblue', size=0.5, alpha=0.5) +\n  scale_x_log10()\n\n\n\n# logarithmic axis: show multiplicative factors, e.g. log2\nggplot(people, aes(x=age, y=height)) + \n  geom_point() + \n  scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"lm\", fill='lightblue', size=0.5, alpha=0.5) +\n  scale_x_continuous(trans = log2_trans(),\n                   breaks = trans_breaks(\"log2\", function(x) 2^x),\n                   labels = trans_format(\"log2\", math_format(2^.x)))\n\n\n\n# outliers: Remove very small and very old people\npeopleTemp <- filter(people, ID != 27) # Diese Person war zu klein.\npeopleClean <- filter(peopleTemp, age < 100) # Fehler in der Erhebung des Alters\n\n# re-explore cleaned data with a histogram\nggplot(peopleClean, aes(x=age)) + \n  geom_histogram(stat=\"bin\", fill='#6baed6', binwidth=10)\n\n\n\nggplot(peopleClean, aes(x=age, y=height)) + \n  geom_point() + \n  scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"lm\", fill='lightblue', size=0.5, alpha=0.5)\n\n\n\n# with custom binwidth\nggplot(peopleClean, aes(x=age)) + \n  geom_histogram(stat=\"bin\", fill='#6baed6', binwidth=10) + \n  theme_bw() # specifying the theme\n\n\n\n# quadratic axis\nggplot(peopleClean, aes(x=age, y=height)) + \n  geom_point() + scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"lm\", fill='lightblue', size=0.5, alpha=0.5) + scale_x_sqrt()\n\n\n\n# filter \"teenies\": No trend\nkids <- filter(peopleClean, age < 15)\n\nggplot(kids, aes(x=age, y=height)) + \n  geom_point() + \n  scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"lm\", fill='lightblue', size=0.5, alpha=0.5)\n\n\n\n# filter \"teenies\": No trend\noldies <- filter(peopleClean, age > 55)\n\nggplot(oldies, aes(x=age, y=height)) + \n  geom_point() + \n  scale_y_continuous(limits=c(0, 2.0)) +\n  geom_smooth(method=\"lm\", fill='lightblue', size=0.5, alpha=0.5)\n\n\n\n# Onwards towards multidimensional data\n\n# Finally, make a scatterplot matrix\npairs(peopleClean[,2:4], panel=panel.smooth)\n\npairs(peopleClean[,2:4], panel=panel.smooth)\n\n\n\n# Or as a bubble chart\npeopleClean$radius <- sqrt( peopleClean$weight/ pi )\nsymbols(peopleClean$age, peopleClean$height, circles=peopleClean$radius)\n\nsymbols(peopleClean$age, peopleClean$height, circles=peopleClean$radius)\n\n\n\n\n\n\n\n",
    "preview": "infovis/InfoVis1-Demo-EDA/distill-preview.png",
    "last_modified": "2021-08-19T12:20:58+02:00",
    "input_file": {}
  },
  {
    "path": "infovis/InfoVis1-Demo-ggplot/",
    "title": "Demo `ggplot2`",
    "description": {},
    "author": [],
    "date": "2021-08-18",
    "categories": [
      "InfoVis1",
      "InfoVis"
    ],
    "contents": "\n\n\nlibrary(tidyverse)\nlibrary(lubridate)\n\n\n\n\n\n\nDemoscript als Download\nAls erstes laden wir den Wetterdatensatz von der Übung Prepro1 ein.\n\n\nwetter <- read_table(\"order_52252_data.txt\",\n                  col_types = list(\n                    col_factor(levels = NULL),    \n                    col_datetime(format = \"%Y%m%d%H\"),\n                    col_double()\n                    )\n                  )\n\n\n\n\nstn\ntime\ntre200h0\nABO\n2000-01-01 00:00:00\n-2.6\nABO\n2000-01-01 01:00:00\n-2.5\nABO\n2000-01-01 02:00:00\n-3.1\nABO\n2000-01-01 03:00:00\n-2.4\nABO\n2000-01-01 04:00:00\n-2.5\nABO\n2000-01-01 05:00:00\n-3.0\n\nDer Datensatz hat 1262615 Zeilen. Bevor wir mit plotten beginnen, müssen wir den Datensatz etwas filtern da die Plots ansonsten zu schwerfällig werden. Wir filtern deshalb auf Januar 2000.\n\n\nwetter_fil <- wetter %>%\n  mutate(\n    year = year(time),\n    month = month(time)\n    ) %>%\n  filter(year == 2000 & month == 1)\n\n\n\nUm in “base-R” einen Scatterplot zu erstellen wo Datum der Temperatur gegenübersteht, gehen wir wie folgt vor:\n\n\nplot(wetter_fil$time, wetter_fil$tre200h0)\n\n\n\n\nIn ggplot sieht das etwas anders und auf den ersten Blick etwas komplizierter aus: Ein ggplot wird durch den Befehl ggplot() initiiert. Hier wird einerseits der Datensatz festgelegt, auf dem der Plot beruht (data =), sowie die Variablen innerhalb des Datensatzes, die Einfluss auf den Plot ausüben (mapping = aes()).\n\n\n# Datensatz: \"wetter_fil\" | Beeinflussende Variabeln: \"time\" und \"tre200h0\"\nggplot(data = wetter_fil, mapping = aes(time,tre200h0))             \n\n\n\n\nWeiter braucht es mindestens ein “Layer” der beschreibt, wie die Daten dargestellt werden sollen (z.B. geom_point()). Anders als bei “Piping” (%>%) wird ein Layer mit + hinzugefügt.\n\n\nggplot(data = wetter_fil, mapping = aes(time,tre200h0)) +\n  # Layer: \"geom_point\" entspricht Punkten in einem Scatterplot \n  geom_point()                                    \n\n\n\n\nDa ggplot die Eingaben in der Reihenfolge data = und dann mapping =erwartet, können wir diese Spezifizierungen auch weglassen.\n\n\nggplot(wetter_fil, aes(time,tre200h0)) +\n  geom_point()\n\n\n\nNun wollen wir die unterschiedlichen Stationen unterschiedlich einfärben. Da wir Variablen definieren wollen, welche Einfluss auf die Grafik haben sollen, gehört diese Information in aes().\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_point()\n\n\n\n\nWir können noch einen Layer mit Linien hinzufügen:\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_point() +\n  geom_line()\n\n\n\n\nWeiter können wir die Achsen beschriften und einen Titel hinzufügen. Zudem lasse ich die Punkte (geom_point()) nun weg, da mir diese nicht gefallen.\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\")\n\n\n\n\nMan kann auch Einfluss auf die x-/y-Achsen nehmen. Dabei muss man zuerst festlegen, was für ein Achsentyp der Plot hat (vorher hat ggplot eine Annahme auf der Basis der Daten getroffen).\nBei unserer y-Achse handelt es sich um numerische Daten, ggplot nennt diese: scale_y_continuous(). Unter ggplot2.tidyverse.org findet man noch andere x/y-Achsentypen (scale_x_irgenwas bzw. scale_y_irgendwas).\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\") +    \n  scale_y_continuous(limits = c(-30,30))    # y-Achsenabschnitt bestimmen\n\n\n\n\nDas gleiche Spiel kann man für die y-Achse betreiben. Bei unserer y-Achse handelt es sich ja um unsere POSIXct Daten. ggplot nennt diese: scale_x_datetime().\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\") +    \n  scale_y_continuous(limits = c(-30,30)) +\n  scale_x_datetime(date_breaks = \"1 week\", \n                   date_minor_breaks = \"1 day\", \n                   date_labels = \"KW%W\")\n\n\n\n\nMit theme verändert man das allgmeine Layout der Plots. Beispielsweise kann man mit theme_classic() ggplot-Grafiken etwas weniger “Poppig” erscheinen lassen: so sind sie besser für Bachelor- / Masterarbeiten sowie Publikationen geeignet. theme_classic() kann man indiviudell pro Plot anwenden, oder für die aktuelle Session global setzen (s.u.)\nIndividuell pro Plot:\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\") +    \n  scale_y_continuous(limits = c(-30,30)) +\n  scale_x_datetime(date_breaks = \"1 week\", \n                   date_minor_breaks = \"1 day\", \n                   date_labels = \"KW%W\") +\n  theme_classic()\n\n\n\n\nGlobal (für alle nachfolgenden Plots der aktuellen Session):\n\n\ntheme_set(theme_classic())\n\n\n\nSehr praktisch sind auch die Funktionen für “Small multiples”. Dies erreicht man mit facet_wrap() (oder facet_grid(), mehr dazu später). Man muss mit einem Tilde-Symbol “~” nur festlegen, welche Variable für das Aufteilen des Plots in kleinere Subplots verantwortlich sein soll.\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\") +    \n  scale_y_continuous(limits = c(-30,30)) +\n  scale_x_datetime(date_breaks = \"2 weeks\", \n                   date_minor_breaks = \"1 day\", \n                   date_labels = \"KW%W\") +\n  facet_wrap(~stn)\n\n\n\n\nAuch facet_wrap kann man auf seine Bedürfnisse anpassen. Da wir 24 Stationen haben möchte ich lieber 3 pro Zeile, damit es schön aufgeht. Dies erreiche ich mit ncol = 3.\nZudem brauchen wir die Legende nicht mehr, da der Stationsnamen über jedem Facet steht. Ich setze deshalb theme(legend.position=\"none\")\n\n\nggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\") +  \n  scale_y_continuous(limits = c(-30,30)) +\n  scale_x_datetime(date_breaks = \"1 week\", date_minor_breaks = \"1 day\", date_labels = \"KW%W\") +\n  facet_wrap(~stn,ncol = 3) +\n  theme(legend.position=\"none\")\n\n\n\n\nGenau wie data.frames und andere Objekte, kann man einen ganzen Plot auch in einer Variabel speichern. Dies kann nützlich sein um einen Plot zu exportieren (als png, jpg usw.) oder sukzessive erweitern wie in diesem Beispiel.\n\n\np <- ggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_line() +\n  labs(x = \"Woche\",\n       y = \"Temperatur in Grad C°\", \n       title = \"Temperaturdaten Schweiz\",\n       subtitle = \"Januar 2000\") +\n  scale_y_continuous(limits = c(-30,30)) +\n  scale_x_datetime(date_breaks = \"1 week\", date_minor_breaks = \"1 day\", date_labels = \"KW%W\") +\n  facet_wrap(~stn,ncol = 3)\n  # ich habe an dieser Stelle theme(legend.position=\"none\") entfernt\n\n\n\nFolgendermassen kann ich den Plot als png-File abspeichern (ohne Angabe von “plot =” wird einfach der letzte Plot gespeichert)\n\n\nggsave(filename = \"plot.png\",plot = p)\n\n\n\n.. und so kann ich einen bestehenden Plot (in einer Variabel) mit einem Layer / einer Option erweitern\n\n\np +\n  theme(legend.position=\"none\")\n\n\n\nWie üblich wurde diese Änderung nicht gespeichert, sondern nur das Resultat davon ausgeben. Wenn die Änderung in meinem Plot (in der Variabel) abspeichern will, muss ich die Variabel überschreiben:\n\n\np <- p +\n  theme(legend.position=\"none\")\n\n\n\nMit geom_smooth() kann ggplot eine Trendlinie auf der Baiss von Punktdaten berechnen. Die zugrunde liegende statistische Methode kann selbst gewählt werden. Wenn nichts angegeben wird verwendet ggplot bei weniger als 1’000 Messungen, die Methode loess (local smooths).\n\n\np <- p +\n  geom_smooth(colour = \"black\")\n\np\n\n\n\n\n\n\n\n",
    "preview": "infovis/InfoVis1-Demo-ggplot/distill-preview.png",
    "last_modified": "2021-08-18T13:48:24+02:00",
    "input_file": {}
  },
  {
    "path": "infovis/InfoVis1-Uebung/",
    "title": "Übung",
    "description": {},
    "author": [],
    "date": "2021-08-19",
    "categories": [
      "InfoVis1",
      "InfoVis"
    ],
    "contents": "\nIn dieser Übung geht es darum, die Grafiken aus dem Blog-post von Marko Kovic (blog.tagesanzeiger.ch) zu rekonstruieren. Schau dir die Grafiken in dem Blogpost durch. Freundlicherweise hat Herr Kovic meist die ggplot2 Standardeinstellungen benutzt, was die Rekonstruktion relativ einfach macht.\nDie Links im Text verweisen auf die Originalgrafik, die eingebetteten Plots sind meine eigenen Rekonstruktionen. Importiere als erstes den Datensatz initiative_masseneinwanderung_kanton.csv (auf der Blog-Seite erhältlich).\n\n\n\n\n\n\n\n\nkanton <- read_delim(\"initiative_masseneinwanderung_kanton.csv\",\",\",locale = locale(encoding = \"UTF-8\")) %>%\n  janitor::clean_names() # säubert die Spaltennamen\n\n\n\nAufgabe 1\nRekonstruiere Grafik 1 von Kovic. Erstelle dazu einen Scatterplot wo der Ausländeranteil der Kantone dem Ja-Anteil gegenüber gestellt wird. Speichere den Plot einer Variabel plot1.\nnutze ggplot(kanton, aes(auslanderanteil, ja_anteil)) um den ggplot zu initiieren.Füge danach ein einen Punkte Layer hinzu (geom_point())\nnutze coord_fixed() um die beiden Achsen in ein fixes Verhältnis zu setzen (1:1).\nOptional:\nsetze die Achsen Start- und Endwerte mittels lims() oder scale_y_continuousbzw. scale_x_continuous.\nSetze analog Kovic die breaks (0.0, 0.1…0.7) manuell\n\nRekonstruktion:\n\n\n\nAufgabe 2\nRekonstruiere Grafik 2. Erweitere dazu plot1 mit einer Trendlinie.\n\n\n\nAufgabe 3\nImportiere die Gemeindedaten initiative_masseneinwanderung_gemeinde.csv:\n\n\ngemeinde <- read_delim(\"initiative_masseneinwanderung_gemeinde.csv\",\",\",locale = locale(encoding = \"UTF-8\")) %>%\n  janitor::clean_names() # säubert die Spaltennamen\n\n\n\nRekonstruiere Grafik 3. Stelle dazu den Ausländeranteil aller Gemeinden dem Ja-Stimmen-Anteil gegenüber. Speichere den Plot als plot2\n\n\n\nAufgabe 4\nRekonstruiere Grafik 4 indem plot2 mit einer Trendlinie erweitert wird.\n\n\n\nAufgabe 5\nRekonstruiere Grafik 5 indem plot2 mit facetting erweitert wird. Die Facets sollen die einzelnen Kantone sein. Speichere den Plot als plot3.\n\n\n\nAufgabe 6\nRekonstruiere Grafik 6 indem plot3 mit einer Trendlinie erweitert wird.\nRekonstruktion:\n\n\n\nAufgabe 7\nRekonstruiere Grafik 7 indem plot2mit facetting erweitert wird. Die Facets sollen nun den Grössen-Quantilen entsprechen. Speichere den Plot unter plot4.\nRekonstruktion:\n\n\n\nAufgabe 8\nRekonstruiere Grafik 8 indem plot4 mit einer Trendlinie ausgestattet wird.\n\n\n\nAufgabe 9 (Optional, fortgeschritten)\nRekonstruiere die Korrelationstabelle.\nTipp: - Nutze group_by() und summarise() - Nutze cor.test() um den Korrelationskoeffizienten sowie den p-Wert zu erhalten. - Mit $estimate und $p.value können die entsprechenden Werte direkt angesprochen werden\nHinweis: aus bisher unerklärlichen Gründen weiche gewisse meiner Werte leicht von den Berechnungen des Herrn Kovics ab.\n\n\n\n\nkanton\nKorr.Koeffizient\nSignifikanz\nAG\n-0.2362552\n***\nAI\n-0.7828022\n-\nAR\n-0.0892817\n-\nBE\n-0.4422003\n***\nBL\n-0.2919712\n**\nBS\n-0.9935385\n-\nFR\n-0.4217634\n***\nGE\n0.3753004\n*\nGL\n-0.4070120\n-\nGR\n-0.0426607\n-\nJU\n-0.2252540\n-\nLU\n-0.3048455\n**\nNE\n-0.5214180\n***\nNW\n-0.2018174\n-\nOW\n-0.4813090\n-\nSG\n-0.2449093\n*\nSH\n-0.2995527\n-\nSO\n-0.0533442\n-\nSZ\n-0.7259276\n***\nTG\n-0.5522862\n***\nTI\n0.1512509\n-\nUR\n-0.3848167\n-\nVD\n-0.2685301\n***\nVS\n-0.1736954\n*\nZG\n0.0407166\n-\nZH\n-0.2744683\n***\n\n\n\n\n",
    "preview": "infovis/InfoVis1-Uebung/distill-preview.png",
    "last_modified": "2021-08-19T12:21:09+02:00",
    "input_file": {}
  },
  {
    "path": "infovis/InfoVis2-Demo-Debug/",
    "title": "Demo Debugging Tips",
    "description": {},
    "author": [],
    "date": "2021-08-19",
    "categories": [
      "InfoVis2",
      "InfoVis"
    ],
    "contents": "\n\n\nlibrary(tidyverse)\nlibrary(lubridate)\n\nwetter <- read_table(\"order_52252_data.txt\",\n                     col_types = list(\n                       col_character(),    \n                       col_datetime(format = \"%Y%m%d%H\"),\n                       col_double()\n                       )\n                     )\n\n\nwetter_fil <- wetter %>%\n  mutate(\n    year = year(time),\n    month = month(time)\n  ) %>%\n  filter(year == 2000 & month == 1)\n\n# Datensatz: \"wetter_fil\" | Beeinflussende Variabeln: \"time\" und \"tre200h0\"\n\n\n\nEinzelne Zeilen ausführen (Selektieren > run)\nEinzelne Zeilen ein/auskommentieren:\nvon Hand\nmit Code > Comment/Uncomment line\n\nAuf Automatische Formatierung achten: Doppeltes \"\" macht den Rest grün…\nErrorwarnungen (x) auf Zeilen-Nummer genau lesen\nSynthax von ?scale_y_continuous() prüfen, was ist die Funktion, was ist das Argument, Bsp. anschauen\nSynthax auch im Netz noch prüfen, dann sogar über die Bildsuche, und zurück zur entsprechenden Webseite…\n\n\n ggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n  geom_point() +\n   geom_line() +\n   labs(x = \"Woche\",\n        y = \"Temperatur in Grad C°\", \n        title = \"Temperaturdaten Schweiz\",\n      subtitle = \"Januar 2000\") \n\n\n\n  #scale_y_continuous(limit = c(\"-30\",\"30\")) \n  #scale_x_datetime(date_breaks = \"1 week\", date_minor_breaks = \"1 day\", date_labels = \"KW%W\") +\n  #facet_wrap(~stn,ncol = 3) +\n  #theme(legend.position=\"none\")\n\n\n\n# ggplot(wetter_fil, aes(time,tre200h0, colour = stn)) +\n#   geom_point() +\n#   geom_line() +\n#   labs(x = \"Woche\",\n#        y = \"Temperatur in Grad C°\",\n#        title = \"Temperaturdaten Schweiz\",\n#        subtitle = \"Januar 2000\") +\n#   scale_y_continuous(limits = c(-30,30)) +\n#   scale_x_datetime(date_breaks = \"1 week\", date_minor_breaks = \"1 day\", date_labels = \"KW%W\") +\n#   facet_wrap(~stn,ncol = 3) +\n#   theme(legend.position=\"none\")\n\n\n\n\n\n\n",
    "preview": "infovis/InfoVis2-Demo-Debug/distill-preview.png",
    "last_modified": "2021-08-19T12:21:15+02:00",
    "input_file": {}
  },
  {
    "path": "infovis/InfoVis2-Uebung-A/",
    "title": "Uebung A",
    "description": {},
    "author": [],
    "date": "2021-08-19",
    "categories": [
      "InfoVis2",
      "InfoVis"
    ],
    "contents": "\n\n\nlibrary(tidyverse)\nlibrary(lubridate)\n\n\n\nLaden den wetter-Datensatz, bereinige ihn wenn nötig (NA-Werte entfernen) und importiere auch den Datensatz order_52252_legend.csv und verbinde die Datensätze mit einem join via dem Stationskürzel.\n\n\nwetter <- read_table(\"order_52252_data.txt\",\n                     col_types = list(\n                       col_character(),    \n                       col_datetime(format = \"%Y%m%d%H\"),\n                       col_double()\n                       )\n                     )\n\nwetter <- wetter %>%\n  filter(!is.na(stn)) %>%\n  filter(!is.na(time))\n\nstation_meta <- read_delim(\"order_52252_legend.csv\",\";\")\n\nwetter <- left_join(wetter,station_meta,by = \"stn\")\n\n\n\nAufgabe 1\nErstelle zwei Hilfsspalten (convenience variables) “Jahr” und “Monat”. Filtere auf ein beliebiges Jahr und zwei beliebige Monate. Speichere den gefilterten Datensatz in einer neuen Variablen ab. Verwende diesen Datensatz für alle folgenden Übungen.\n\n\n# Lösung Aufgabe 1\n\nwetter_fil <- wetter %>%\n  mutate(\n    year = year(time),\n    month = month(time)\n  ) %>%\n  filter(year == 2000 & month < 3)\n\n\n\nAufgabe 2\nErstelle ein Scatterplot (time vs. tre200h0) wobei die Punkte aufgrund ihrer Meereshöhe eingefärbt werden sollen. Tiefe Werte sollen dabei blau eingefärbt werden und hohe Werte rot. Verkleinere die Punkte um übermässiges Überplotten der Punkten zu vermeiden. Weiter sollen im Abstand von zwei Wochen die Kalenderwochen auf der Achse erscheinen.\nSpeichere den Plot in einer Variabel p ab.\n\n\n# Lösung Aufgabe 2\n\np <- ggplot(wetter_fil, aes(time,tre200h0, colour = Meereshoehe)) +\n  geom_point(size = 0.5) +\n  labs(x = \"Kalenderwoche\", y = \"Temperatur in ° Celsius\") +\n  scale_color_continuous(low = \"blue\", high = \"red\") +\n  scale_x_datetime(date_breaks = \"2 week\", date_labels = \"KW%W\") \n\np \n\n\n\n\nAufgabe 3\nFüge am obigen Plot (gespeichert als Variabel p) eine schwarze, gestrichelte Trendlinie hinzu und aktualisiere p (p <- p + ...).\n\n\n# Lösung Aufgabe 3\n\np <- p +\n  stat_smooth(colour = \"black\",lty = 2)\n\np\n\n\n\n\nAufgabe 4\nPositioniere die Legende oberhalb des Plots und lege sie quer (nutze dazu theme() mit legend.direction und legend.position). Speichere diese Änderungen in p.\n\n\n# Lösung Aufgabe 4\n\n\np <- p + \n  theme(legend.direction = \"horizontal\",legend.position = \"top\")\n\np\n\n\n\n\nAufgabe 5 (optional, fortgeschritten)\nFüge den Temperaturwerten auf der y-Ache ein °C hinzu (siehe unten und studiere diesen Tipp zur Hilfe). Speichere den plot in p2.\n\n\n# Lösung Aufgabe 5\n\np +\n  scale_y_continuous(labels = function(x)paste0(x,\"°C\")) +\n  labs(x = \"Kalenderwoche\", y = \"Temperatur\")\n\n\n\n\nAufgabe 6 (optional, fortgeschritten)\nFüge dem Plot eine zweite, korrekt ausgerichtete Achse mit Kelvin oder Farenheit hinzu (siehe sec_axis). Wenn du es vorherigen Übung schon geschafft hast, setze auch hier die Einheit (K oder °F) hinter die Werte auf der Achse.\n\\[ K = °C + 273,15\\] \\[°F = °C × \\frac{9}{5} + 32\\]\n\n\n# Lösung Aufgabe 6\n\np <- p +\n  labs(x = \"Kalenderwoche\", y = \"Temperatur\") +\n  scale_y_continuous(labels = function(x)paste0(x,\"°C\"),sec.axis = sec_axis(~.*(9/5)+32,name = \"Temperatur\",labels = function(x)paste0(x,\"° F\")))\n\n\np\n\n\n\n\nAufgabe 7\nJetzt verlassen wir den scatterplot und machen einen Boxplot mit den Temperaturdaten. Färbe die Boxplots wieder in Abhängigkeit der Meereshöhe ein.\nBeachte den Unterschied zwischen colour = und fill =\nBeachte den Unterschied zwischen facet_wrap() und facet_grid()\nfacet_grid() braucht übrigens noch einen Punkt (.) zur Tilde (~).\nBeachte den Unterschied zwischen “.~” und “~.” bei facet_grid()\nverschiebe nach Bedarf die Legende\n\n\n# Lösung Aufgabe 7\n\nwetter_fil <- mutate(wetter_fil,monat = month(time,label = T,abbr = F))\n\n\nggplot(wetter_fil, aes(stn,tre200h0, fill = Meereshoehe)) +\n  geom_boxplot() +\n  facet_grid(monat~.) +\n  labs(x = \"Station\", y = \"Temperatur\") +\n  theme(legend.direction = \"horizontal\",legend.position = \"top\")\n\n\n\n\nAufgabe 8\nTeile die Stationen in verschiedene Höhenlagen ein (Tieflage [< 450 m], Mittellage [450 - 1000 m] und Hochlage [> 1’000 m]). Vergleiche die Verteilung der Temperaturwerte in den verschiedenen Lagen.\nNutze dazu facet_grid um die Höhenlage dem Monat gegenüber zu stellen (Monat~Lage)\nPasse scales = an damit keine leeren Stellen auf der x-Achse entstehen\nOptional: Verwende den vollen Stationsnamen anstelle des Kürzels und drehe diese ab damit sie sich gegenseitig nicht überschreiben\n\n\n# Lösung Aufgabe 8\n\nwetter_fil$Lage[wetter_fil$Meereshoehe < 450] <- \"Tieflage\" \nwetter_fil$Lage[wetter_fil$Meereshoehe >= 450 & wetter_fil$Meereshoehe <1000] <- \"Mittellage\" \nwetter_fil$Lage[wetter_fil$Meereshoehe >= 1000] <- \"Hochlage\" \n\n\nggplot(wetter_fil, aes(Name,tre200h0)) +\n  geom_boxplot() +\n  facet_grid(monat~Lage, scales = \"free_x\") +\n  labs(x = \"Lage\", y = \"Temperatur\") +\n  theme(axis.text.x = element_text(angle = 45,hjust = 1))\n\n\n\n\nAufgabe 9\nAls letzter wichtiger Plottyp noch zwei Übungen zum Histogramm. Erstelle ein Histogramm geom_histogram() mit den Temperaturwerten. Färbe Säulen aufgrund ihrer Höhenlage ein und die Begrenzungslinie weiss. Setze die Klassenbreite auf 1 Grad.\n\n\n# Lösung Aufgabe 9\n\n\nh <- ggplot(wetter_fil,aes(tre200h0, fill = Lage)) +\n  geom_histogram(binwidth = 1, colour = \"white\") +\n  labs(x = \"Temperatur in °C\", y = \"Anzahl\")\n\nh\n\n\n\n\nAufgabe 10\nErstelle facets aufgrund der Höhenlage. Setze noch eine Vertikale linie beim Nullpunkt und stelle den x-Achsenabschnit symmetrisch ein (z.B -30 bis + 30°C).\n\n\n# Lösung Aufgabe 10\n\n\nh + \n  geom_vline(xintercept = 0, lty = 2, alpha = 0.5) +\n  facet_wrap(~Lage) +\n  lims(x = c(-30,30)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n",
    "preview": "infovis/InfoVis2-Uebung-A/distill-preview.png",
    "last_modified": "2021-08-19T12:21:34+02:00",
    "input_file": {}
  },
  {
    "path": "infovis/InfoVis2-Uebung-B/",
    "title": "Uebung B (Optional)",
    "description": {},
    "author": [],
    "date": "2021-08-19",
    "categories": [
      "InfoVis2",
      "InfoVis"
    ],
    "contents": "\n\nContents\nAufgabe 1: Parallel coordinate plots\nAufgabe 2: Polar Plot mit Biber Daten\nAufgabe 3: Polar Plot mit Passagier-Daten\nAufgabe 4: 3D Scatterplot\n\nIn dieser Übung bauen wir einige etwas unübliche Plots aus der Vorlesung nach. Dafür verwenden wir Datensätze, die in R bereits integriert sind. Eine Liste dieser Datensätze findet man hier oder mit der Hilfe ?datasets.\nDazu verwenden wir vor allem das Package plotly welches im Gegensatz zu ggplot2 ein paar zusätzliche Plot-Typen kennt und zudem noch interaktiv ist. Leider scheinen gewisse Browsers (z.B. Firefox) sowie der Viewer Pane mit plotly Mühe zu haben. Deshalb empfehlen wir folgendes:\nÜbungsunterlagen für InfoVis2 in Chrome zu öffnen\nFalls ihr auf dem RStudio Server arbeitet: hier ebenfalls in Chrome arbeiten\nFalls ihr lokal mit RStudio arbeitet: Mit der Option options(viewer=NULL) werden Plots mit dem Standart Browser.\n\n\n\nAufgabe 1: Parallel coordinate plots\nErstelle einen parallel coordinate plot. Dafür eignet sich der integrierte Datensatz mtcars:\n\n\nmpg\ncyl\ndisp\nhp\ndrat\nwt\nqsec\nvs\nam\ngear\ncarb\nMazda RX4\n21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\nMazda RX4 Wag\n21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\nDatsun 710\n22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\nHornet 4 Drive\n21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\nHornet Sportabout\n18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\nValiant\n18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n\n\n\n# Nur nötig, wenn ihr mit einer lokalen Installation von RStudio arbeitet\n# (also nicht auf dem Server).\noptions(viewer=NULL)\n\n\n\nParallel Coordinates lassen sich mit nativem ggplot2 nicht herstellen. Es braucht dazu entweder Erweiterungen oder “standalone” Tools. Als “standalone” Tool kann ich plotly stark empfehlen. Plotly verfügt zwar über eine etwas eigenwillige Syntax, bietet dafür über sehr vielseitige zusätzliche Möglichkeiten. Vor allem aber sind sämtliche plotly Grafiken webbasiert und interaktiv.\nHier findet ihr eine Anleitung zur Herstellung eines Parallel Coordinates Plot mit plotly: https://plot.ly/r/parallel-coordinates-plot/\nSo sieht der fertige Plot aus:\n\n\n# Lösung Aufgabe 1\n\np <- mtcars %>%\n  plot_ly(type = 'parcoords',\n          line = list(color = ~mpg,\n                      colorscale = list(c(0,'red'),c(1,'blue'))),\n          dimensions = list(\n            list(label = 'mpg', values = ~mpg),\n            list(label = 'disp', values = ~disp),\n            list(label = 'hp', values = ~hp),\n            list(label = 'drat', values = ~drat),\n            list(label = 'wt', values = ~wt),\n            list(label = 'qsec', values = ~qsec),\n            list(label = 'vs', values = ~vs),\n            list(label = 'am', values = ~am),\n            list(label = 'gear', values = ~gear),\n            list(label = 'carb', values = ~carb)\n          )\n  )\n\np\n\n\n\n{\"x\":{\"visdat\":{\"439d4b7c1bb7\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"439d4b7c1bb7\",\"attrs\":{\"439d4b7c1bb7\":{\"line\":{\"color\":{},\"colorscale\":[[\"0\",\"red\"],[\"1\",\"blue\"]]},\"dimensions\":[{\"label\":\"mpg\",\"values\":{}},{\"label\":\"disp\",\"values\":{}},{\"label\":\"hp\",\"values\":{}},{\"label\":\"drat\",\"values\":{}},{\"label\":\"wt\",\"values\":{}},{\"label\":\"qsec\",\"values\":{}},{\"label\":\"vs\",\"values\":{}},{\"label\":\"am\",\"values\":{}},{\"label\":\"gear\",\"values\":{}},{\"label\":\"carb\",\"values\":{}}],\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"parcoords\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"r\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"line\":{\"color\":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],\"colorscale\":[[\"0\",\"red\"],[\"1\",\"blue\"]]},\"dimensions\":[{\"label\":\"mpg\",\"values\":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4]},{\"label\":\"disp\",\"values\":[160,160,108,258,360,225,360,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472,460,440,78.7,75.7,71.1,120.1,318,304,350,400,79,120.3,95.1,351,145,301,121]},{\"label\":\"hp\",\"values\":[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109]},{\"label\":\"drat\",\"values\":[3.9,3.9,3.85,3.08,3.15,2.76,3.21,3.69,3.92,3.92,3.92,3.07,3.07,3.07,2.93,3,3.23,4.08,4.93,4.22,3.7,2.76,3.15,3.73,3.08,4.08,4.43,3.77,4.22,3.62,3.54,4.11]},{\"label\":\"wt\",\"values\":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78]},{\"label\":\"qsec\",\"values\":[16.46,17.02,18.61,19.44,17.02,20.22,15.84,20,22.9,18.3,18.9,17.4,17.6,18,17.98,17.82,17.42,19.47,18.52,19.9,20.01,16.87,17.3,15.41,17.05,18.9,16.7,16.9,14.5,15.5,14.6,18.6]},{\"label\":\"vs\",\"values\":[0,0,1,1,0,1,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,0,1,0,0,0,1]},{\"label\":\"am\",\"values\":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1]},{\"label\":\"gear\",\"values\":[4,4,4,3,3,3,3,4,4,4,4,3,3,3,3,3,3,4,4,4,3,3,3,3,3,4,5,5,5,5,5,4]},{\"label\":\"carb\",\"values\":[4,4,1,1,2,1,4,2,2,4,4,3,3,3,4,4,4,1,2,1,1,2,2,4,2,1,2,2,4,6,8,2]}],\"type\":\"parcoords\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\nAufgabe 2: Polar Plot mit Biber Daten\nPolar Plots (welche man ebenfalls mit Plotly erstellen kann) eignen sich unter anderem für Daten, die zyklischer Natur sind, wie zum Beispiel zeitlich geprägte Daten (Tages-, Wochen-, oder Jahresrhythmen). Aus den Beispiels-Datensätzen habe ich zwei Datensätze gefunden, die zeitlich geprägt sind:\nbeaver1 und beaver2 AirPassenger\nBeide Datensätze müssen noch etwas umgeformt werden, bevor wir sie für einen Radialplot verwenden können. In Aufgabe 2 verwenden wir die Biber-Datensätze, in der nächsten Aufgabe (3) die Passagier-Daten.\nWenn wir die Daten von beiden Bibern verwenden wollen, müssen wir diese noch zusammenfügen:\n\n\nbeaver1_new <- beaver1 %>%\n  mutate(beaver = \"nr1\")\n\nbeaver2_new <- beaver2 %>%\n  mutate(beaver = \"nr2\")\n\nbeaver_new <- rbind(beaver1_new,beaver2_new)\n\n\n\nZudem müssen wir die Zeitangabe noch anpassen: Gemäss der Datenbeschreibung handelt es sich bei der Zeitangabe um ein sehr programmier-unfreundliches Format. 3:30 wird als “0330” notiert. Wir müssen diese Zeitangabe, noch in ein Dezimalsystem umwandeln:\n\n\nbeaver_new <- beaver_new %>%\n  mutate(\n    hour_dec = (time/100)%/%1,         # Ganze Stunden (mittels ganzzaliger Division)\n    min_dec = (time/100)%%1/0.6,       # Dezimalminuten (15 min wird zu 0.25, via Modulo)\n    hour_min_dec = hour_dec+min_dec    # Dezimal-Zeitangabe (03:30 wird zu 3.5)\n    ) \n\n\n\nDer Datensatz:\n\nday\ntime\ntemp\nactiv\nbeaver\nhour_dec\nmin_dec\nhour_min_dec\n346\n840\n36.33\n0\nnr1\n8\n0.6666667\n8.666667\n346\n850\n36.34\n0\nnr1\n8\n0.8333333\n8.833333\n346\n900\n36.35\n0\nnr1\n9\n0.0000000\n9.000000\n346\n910\n36.42\n0\nnr1\n9\n0.1666667\n9.166667\n346\n920\n36.55\n0\nnr1\n9\n0.3333333\n9.333333\n346\n930\n36.69\n0\nnr1\n9\n0.5000000\n9.500000\n\nSo sieht der fertige Plot aus. Rekonstruiere dies mit plotly:\n\n\n# Lösung Aufgabe 2\n\np <- beaver_new %>%\n  plot_ly(r = ~temp, t = ~hour_min_dec, color = ~beaver,mode = \"lines\", type = \"scatter\") %>%\n  layout(\n    radialaxis = list(range = c(35,39)),\n    angularaxis = list(range = c(0,24)),\n    orientation = 270,\n    showlegend = F\n    )\n\np\n\n\n\n{\"x\":{\"visdat\":{\"439d239aaff9\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"439d239aaff9\",\"attrs\":{\"439d239aaff9\":{\"r\":{},\"t\":{},\"mode\":\"lines\",\"color\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"scatter\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"radialaxis\":{\"range\":[35,39]},\"angularaxis\":{\"range\":[0,24]},\"orientation\":270,\"showlegend\":false,\"xaxis\":{\"domain\":[0,1],\"automargin\":true},\"yaxis\":{\"domain\":[0,1],\"automargin\":true},\"hovermode\":\"closest\"},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"r\":[36.33,36.34,36.35,36.42,36.55,36.69,36.71,36.75,36.81,36.88,36.89,36.91,36.85,36.89,36.89,36.67,36.5,36.74,36.77,36.76,36.78,36.82,36.89,36.99,36.92,36.99,36.89,36.94,36.92,36.97,36.91,36.79,36.77,36.69,36.62,36.54,36.55,36.67,36.69,36.62,36.64,36.59,36.65,36.75,36.8,36.81,36.87,36.87,36.89,36.94,36.98,36.95,37,37.07,37.05,37,36.95,37,36.94,36.88,36.93,36.98,36.97,36.85,36.92,36.99,37.01,37.1,37.09,37.02,36.96,36.84,36.87,36.85,36.85,36.87,36.89,36.86,36.91,37.53,37.23,37.2,37.25,37.2,37.21,37.24,37.1,37.2,37.18,36.93,36.83,36.93,36.83,36.8,36.75,36.71,36.73,36.75,36.72,36.76,36.7,36.82,36.88,36.94,36.79,36.78,36.8,36.82,36.84,36.86,36.88,36.93,36.97,37.15],\"t\":[8.66666666666667,8.83333333333333,9,9.16666666666667,9.33333333333333,9.5,9.66666666666667,9.83333333333333,10,10.1666666666667,10.3333333333333,10.5,10.6666666666667,10.8333333333333,11,11.1666666666667,11.3333333333333,11.5,11.6666666666667,11.8333333333333,12,12.1666666666667,12.3333333333333,12.5,12.6666666666667,12.8333333333333,13,13.1666666666667,13.3333333333333,13.5,13.6666666666667,13.8333333333333,14,14.1666666666667,14.3333333333333,14.5,14.6666666666667,14.8333333333333,15,15.1666666666667,15.3333333333333,15.5,15.6666666666667,15.8333333333333,16,16.1666666666667,16.3333333333333,16.5,16.6666666666667,16.8333333333333,17,17.1666666666667,17.3333333333333,17.5,17.6666666666667,17.8333333333333,18,18.1666666666667,18.3333333333333,18.5,18.6666666666667,18.8333333333333,19,19.1666666666667,19.3333333333333,19.5,19.6666666666667,19.8333333333333,20,20.1666666666667,20.3333333333333,20.5,20.6666666666667,20.8333333333333,21,21.1666666666667,21.3333333333333,21.5,21.6666666666667,21.8333333333333,22,22.1666666666667,22.5,22.6666666666667,22.8333333333333,23,23.1666666666667,23.3333333333333,23.5,23.6666666666667,23.8333333333333,0,0.166666666666667,0.333333333333333,0.5,0.666666666666667,0.833333333333333,1,1.16666666666667,1.33333333333333,1.5,1.66666666666667,1.83333333333333,2,2.16666666666667,2.33333333333333,2.5,2.66666666666667,2.83333333333333,3,3.16666666666667,3.33333333333333,3.5,3.66666666666667],\"mode\":\"lines\",\"type\":\"scatter\",\"name\":\"nr1\",\"marker\":{\"color\":\"rgba(102,194,165,1)\",\"line\":{\"color\":\"rgba(102,194,165,1)\"}},\"textfont\":{\"color\":\"rgba(102,194,165,1)\"},\"error_y\":{\"color\":\"rgba(102,194,165,1)\"},\"error_x\":{\"color\":\"rgba(102,194,165,1)\"},\"line\":{\"color\":\"rgba(102,194,165,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[36.58,36.73,36.93,37.15,37.23,37.24,37.24,36.9,36.95,36.89,36.95,37,36.9,36.99,36.99,37.01,37.04,37.04,37.14,37.07,36.98,37.01,36.97,36.97,37.12,37.13,37.14,37.15,37.17,37.12,37.12,37.17,37.28,37.28,37.44,37.51,37.64,37.51,37.98,38.02,38,38.24,38.1,38.24,38.11,38.02,38.11,38.01,37.91,37.96,38.03,38.17,38.19,38.18,38.15,38.04,37.96,37.84,37.83,37.84,37.74,37.76,37.76,37.64,37.63,38.06,38.19,38.35,38.25,37.86,37.95,37.95,37.76,37.6,37.89,37.86,37.71,37.78,37.82,37.76,37.81,37.84,38.01,38.1,38.15,37.92,37.64,37.7,37.46,37.41,37.46,37.56,37.55,37.75,37.76,37.73,37.77,38.01,38.04,38.07],\"t\":[9.5,9.66666666666667,9.83333333333333,10,10.1666666666667,10.3333333333333,10.5,10.6666666666667,10.8333333333333,11,11.1666666666667,11.3333333333333,11.5,11.6666666666667,11.8333333333333,12,12.1666666666667,12.3333333333333,12.5,12.6666666666667,12.8333333333333,13,13.1666666666667,13.3333333333333,13.5,13.6666666666667,13.8333333333333,14,14.1666666666667,14.3333333333333,14.5,14.6666666666667,14.8333333333333,15,15.1666666666667,15.3333333333333,15.5,15.6666666666667,15.8333333333333,16,16.1666666666667,16.3333333333333,16.5,16.6666666666667,16.8333333333333,17,17.1666666666667,17.3333333333333,17.5,17.6666666666667,17.8333333333333,18,18.1666666666667,18.3333333333333,18.5,18.6666666666667,18.8333333333333,19,19.1666666666667,19.3333333333333,19.5,19.6666666666667,19.8333333333333,20,20.1666666666667,20.3333333333333,20.5,20.6666666666667,20.8333333333333,21,21.1666666666667,21.3333333333333,21.5,21.6666666666667,21.8333333333333,22,22.1666666666667,22.3333333333333,22.5,22.6666666666667,22.8333333333333,23,23.1666666666667,23.3333333333333,23.5,23.6666666666667,23.8333333333333,0,0.166666666666667,0.333333333333333,0.5,0.666666666666667,0.833333333333333,1,1.16666666666667,1.33333333333333,1.5,1.66666666666667,1.83333333333333,2],\"mode\":\"lines\",\"type\":\"scatter\",\"name\":\"nr2\",\"marker\":{\"color\":\"rgba(141,160,203,1)\",\"line\":{\"color\":\"rgba(141,160,203,1)\"}},\"textfont\":{\"color\":\"rgba(141,160,203,1)\"},\"error_y\":{\"color\":\"rgba(141,160,203,1)\"},\"error_x\":{\"color\":\"rgba(141,160,203,1)\"},\"line\":{\"color\":\"rgba(141,160,203,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\nAufgabe 3: Polar Plot mit Passagier-Daten\nAnalog Aufgabe 2, dieses Mal mit dem Datensatz AirPassanger\nAirPassengers kommt in einem Format daher, das ich selbst noch gar nicht kannte. Es sieht zwar aus wie ein data.frame oder eine matrix, ist aber von der Klasse ts.\n\n\nAirPassengers\n\n\n     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\n1949 112 118 132 129 121 135 148 148 136 119 104 118\n1950 115 126 141 135 125 149 170 170 158 133 114 140\n1951 145 150 178 163 172 178 199 199 184 162 146 166\n1952 171 180 193 181 183 218 230 242 209 191 172 194\n1953 196 196 236 235 229 243 264 272 237 211 180 201\n1954 204 188 235 227 234 264 302 293 259 229 203 229\n1955 242 233 267 269 270 315 364 347 312 274 237 278\n1956 284 277 317 313 318 374 413 405 355 306 271 306\n1957 315 301 356 348 355 422 465 467 404 347 305 336\n1958 340 318 362 348 363 435 491 505 404 359 310 337\n1959 360 342 406 396 420 472 548 559 463 407 362 405\n1960 417 391 419 461 472 535 622 606 508 461 390 432\n\nclass(AirPassengers)\n\n\n[1] \"ts\"\n\nDamit wir den Datensatz verwenden können, müssen wir ihn zuerst in eine matrix umwandeln. Wie das geht habe ich hier erfahren.\n\n\nAirPassengers2 <- tapply(AirPassengers, list(year = floor(time(AirPassengers)), month = month.abb[cycle(AirPassengers)]), c)\n\n\n\nAus der matrix muss noch ein Dataframe her, zudem müssen wir aus der breiten Tabelle eine lange Tabelle machen:\n\n\nAirPassengers3 <- AirPassengers2 %>%\n  as.data.frame() %>%\n  rownames_to_column(\"year\") %>%\n  gather(month,n,-year) %>%\n  mutate(\n    # ich nutze einen billigen Trick um ausgeschriebene Monate in Nummern umzuwandeln [1]\n    month = factor(month, levels = month.abb,ordered = T),\n    month_numb = as.integer(month),\n    year = factor(year, ordered = T)\n  )\n\n\n# [1] beachtet an dieser Stelle das Verhalten von as.integer() wenn es sich um factors() handelt. Hier wird das Verhalten genutzt, andersweitig kann es einem zum Verhngnis werden. Das Verhalten wir auch hier verdeutlicht:\n# as.integer(as.character(\"500\"))\n# as.integer(as.factor(\"500\"))\n\n\n\nHier der fertige Plot. Rekonstruiere dies mit plotly:\n\n\n# Lösung Aufgabe 3\n\np <- AirPassengers3 %>%\n  plot_ly(r = ~n, t = ~month_numb, color = ~year, mode = \"markers\", type = \"scatter\") %>%\n  layout(\n    showlegend = T,\n    angularaxis = list(range = c(0,12)),\n    orientation = 270,\n    legend = list(traceorder = \"reversed\")\n) \n\n\n\n\n\n{\"x\":{\"visdat\":{\"439d489e2b32\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"439d489e2b32\",\"attrs\":{\"439d489e2b32\":{\"r\":{},\"t\":{},\"mode\":\"markers\",\"color\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"scatter\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"showlegend\":true,\"angularaxis\":{\"range\":[0,12]},\"orientation\":270,\"legend\":{\"traceorder\":\"reversed\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true},\"yaxis\":{\"domain\":[0,1],\"automargin\":true},\"hovermode\":\"closest\"},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"r\":[461,606,432,391,417,622,535,419,472,390,461,508],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1960\",\"marker\":{\"color\":\"rgba(253,231,37,1)\",\"line\":{\"color\":\"rgba(253,231,37,1)\"}},\"textfont\":{\"color\":\"rgba(253,231,37,1)\"},\"error_y\":{\"color\":\"rgba(253,231,37,1)\"},\"error_x\":{\"color\":\"rgba(253,231,37,1)\"},\"line\":{\"color\":\"rgba(253,231,37,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[396,559,405,342,360,548,472,406,420,362,407,463],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1959\",\"marker\":{\"color\":\"rgba(194,223,35,1)\",\"line\":{\"color\":\"rgba(194,223,35,1)\"}},\"textfont\":{\"color\":\"rgba(194,223,35,1)\"},\"error_y\":{\"color\":\"rgba(194,223,35,1)\"},\"error_x\":{\"color\":\"rgba(194,223,35,1)\"},\"line\":{\"color\":\"rgba(194,223,35,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[348,505,337,318,340,491,435,362,363,310,359,404],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1958\",\"marker\":{\"color\":\"rgba(133,213,74,1)\",\"line\":{\"color\":\"rgba(133,213,74,1)\"}},\"textfont\":{\"color\":\"rgba(133,213,74,1)\"},\"error_y\":{\"color\":\"rgba(133,213,74,1)\"},\"error_x\":{\"color\":\"rgba(133,213,74,1)\"},\"line\":{\"color\":\"rgba(133,213,74,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[348,467,336,301,315,465,422,356,355,305,347,404],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1957\",\"marker\":{\"color\":\"rgba(81,197,106,1)\",\"line\":{\"color\":\"rgba(81,197,106,1)\"}},\"textfont\":{\"color\":\"rgba(81,197,106,1)\"},\"error_y\":{\"color\":\"rgba(81,197,106,1)\"},\"error_x\":{\"color\":\"rgba(81,197,106,1)\"},\"line\":{\"color\":\"rgba(81,197,106,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[313,405,306,277,284,413,374,317,318,271,306,355],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1956\",\"marker\":{\"color\":\"rgba(43,176,127,1)\",\"line\":{\"color\":\"rgba(43,176,127,1)\"}},\"textfont\":{\"color\":\"rgba(43,176,127,1)\"},\"error_y\":{\"color\":\"rgba(43,176,127,1)\"},\"error_x\":{\"color\":\"rgba(43,176,127,1)\"},\"line\":{\"color\":\"rgba(43,176,127,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[269,347,278,233,242,364,315,267,270,237,274,312],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1955\",\"marker\":{\"color\":\"rgba(30,155,138,1)\",\"line\":{\"color\":\"rgba(30,155,138,1)\"}},\"textfont\":{\"color\":\"rgba(30,155,138,1)\"},\"error_y\":{\"color\":\"rgba(30,155,138,1)\"},\"error_x\":{\"color\":\"rgba(30,155,138,1)\"},\"line\":{\"color\":\"rgba(30,155,138,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[227,293,229,188,204,302,264,235,234,203,229,259],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1954\",\"marker\":{\"color\":\"rgba(37,133,142,1)\",\"line\":{\"color\":\"rgba(37,133,142,1)\"}},\"textfont\":{\"color\":\"rgba(37,133,142,1)\"},\"error_y\":{\"color\":\"rgba(37,133,142,1)\"},\"error_x\":{\"color\":\"rgba(37,133,142,1)\"},\"line\":{\"color\":\"rgba(37,133,142,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[235,272,201,196,196,264,243,236,229,180,211,237],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1953\",\"marker\":{\"color\":\"rgba(45,112,142,1)\",\"line\":{\"color\":\"rgba(45,112,142,1)\"}},\"textfont\":{\"color\":\"rgba(45,112,142,1)\"},\"error_y\":{\"color\":\"rgba(45,112,142,1)\"},\"error_x\":{\"color\":\"rgba(45,112,142,1)\"},\"line\":{\"color\":\"rgba(45,112,142,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[181,242,194,180,171,230,218,193,183,172,191,209],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1952\",\"marker\":{\"color\":\"rgba(56,89,140,1)\",\"line\":{\"color\":\"rgba(56,89,140,1)\"}},\"textfont\":{\"color\":\"rgba(56,89,140,1)\"},\"error_y\":{\"color\":\"rgba(56,89,140,1)\"},\"error_x\":{\"color\":\"rgba(56,89,140,1)\"},\"line\":{\"color\":\"rgba(56,89,140,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[163,199,166,150,145,199,178,178,172,146,162,184],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1951\",\"marker\":{\"color\":\"rgba(67,62,133,1)\",\"line\":{\"color\":\"rgba(67,62,133,1)\"}},\"textfont\":{\"color\":\"rgba(67,62,133,1)\"},\"error_y\":{\"color\":\"rgba(67,62,133,1)\"},\"error_x\":{\"color\":\"rgba(67,62,133,1)\"},\"line\":{\"color\":\"rgba(67,62,133,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[135,170,140,126,115,170,149,141,125,114,133,158],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1950\",\"marker\":{\"color\":\"rgba(72,33,115,1)\",\"line\":{\"color\":\"rgba(72,33,115,1)\"}},\"textfont\":{\"color\":\"rgba(72,33,115,1)\"},\"error_y\":{\"color\":\"rgba(72,33,115,1)\"},\"error_x\":{\"color\":\"rgba(72,33,115,1)\"},\"line\":{\"color\":\"rgba(72,33,115,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"r\":[129,148,118,118,112,148,135,132,121,104,119,136],\"t\":[4,8,12,2,1,7,6,3,5,11,10,9],\"mode\":\"markers\",\"type\":\"scatter\",\"name\":\"1949\",\"marker\":{\"color\":\"rgba(68,1,84,1)\",\"line\":{\"color\":\"rgba(68,1,84,1)\"}},\"textfont\":{\"color\":\"rgba(68,1,84,1)\"},\"error_y\":{\"color\":\"rgba(68,1,84,1)\"},\"error_x\":{\"color\":\"rgba(68,1,84,1)\"},\"line\":{\"color\":\"rgba(68,1,84,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\nAufgabe 4: 3D Scatterplot\nErstelle einen 3D Scatterplot, ebenfalls mit plotly. Nutze dazu den Datensatz trees. Ein Beispiel für einen 3D Scatterplot findet ihr hier.\n\n\n# Lösung Aufgabe 4\n\n  p <- trees %>%\n  plot_ly(x = ~Girth, y = ~Height, z = ~Volume)\n\n\n\n\n\n{\"x\":{\"visdat\":{\"439d7217e011\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"439d7217e011\",\"attrs\":{\"439d7217e011\":{\"x\":{},\"y\":{},\"z\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20]}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"scene\":{\"xaxis\":{\"title\":\"Girth\"},\"yaxis\":{\"title\":\"Height\"},\"zaxis\":{\"title\":\"Volume\"}},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"x\":[8.3,8.6,8.8,10.5,10.7,10.8,11,11,11.1,11.2,11.3,11.4,11.4,11.7,12,12.9,12.9,13.3,13.7,13.8,14,14.2,14.5,16,16.3,17.3,17.5,17.9,18,18,20.6],\"y\":[70,65,63,72,81,83,66,75,80,75,79,76,76,69,75,74,85,86,71,64,78,80,74,72,77,81,82,80,80,80,87],\"z\":[10.3,10.3,10.2,16.4,18.8,19.7,15.6,18.2,22.6,19.9,24.2,21,21.4,21.3,19.1,22.2,33.8,27.4,25.7,24.9,34.5,31.7,36.3,38.3,42.6,55.4,55.7,58.3,51.5,51,77],\"type\":\"scatter3d\",\"mode\":\"markers\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"line\":{\"color\":\"rgba(31,119,180,1)\"},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\n\n\n\n",
    "preview": {},
    "last_modified": "2021-08-19T12:21:39+02:00",
    "input_file": {}
  }
]
