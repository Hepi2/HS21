--- 
title: "Research Methods"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
#output: bookdown::gitbook
documentclass: book
bibliography: [00_Admin/book.bib, 00_Admin/packages.bib]
biblio-style: apalike
link-citations: yes
description: "Begleitmaterial zum Modul 'Research Methods' "
---

# Einleitung


Das Modul „Research Methods“ vermittelt vertiefte Methodenkompetenzen für praxisorientiertes und angewandtes wissenschaftliches Arbeiten im Fachbereich „Umwelt und Natürliche Ressourcen“ auf MSc-Niveau. Die Studierenden erarbeiten sich vertiefte Methodenkompetenzen für die analytische Betrachtung der Zusammenhänge im Gesamtsystem „Umwelt und Natürliche Ressourcen“. Die Studierenden erlernen die methodischen Kompetenzen, auf denen die nachfolgenden Module im MSc Programm UNR aufbauen. Das Modul vermittelt einerseits allgemeine, fächerübergreifende methodische Kompetenzen (z.B. Wissenschaftstheorie, computer-gestützte Datenverar-beitung und Statistik).

Auf dieser Plattform (RStudio Connect) werden die Unterlagen für die R-Übungsteile bereitgestellt. Es werden sukzessive sowohl Demo-Files, Aufgabenstellungen und Lösungen veröffentlicht.




```{r, include=F, message=F}
# Set Root Directory / Working directory to Project folder for all Files (if M-K)
knitr::opts_knit$set(root.dir = getwd())
```


```{r, include=F, message=F}


grepl_loop <- function(vector,remove){
  for(remove_i in remove){
    vector <- vector[!grepl(remove_i,vector)]
  }
  return(vector)
}




# Allow duplicate Labels so that calling purl() does not create an error
# https://stackoverflow.com/q/36868287/4139249
options(knitr.duplicate.label = 'allow')

# purl all Rmd Documents (with some exceptions) and store them in a Subfolder /RFiles
# Document cannot be knitted if the folder "RFiles" does not exist!
library(stringr)

keywords <- c("ResearchMethods","_Rcode","99_","index","Archive","Admin","main","Abstract")


rmds <- list.files(pattern = ".Rmd",recursive = T)

rmds <- grepl_loop(rmds,keywords)


for (file in rmds){
  file_r <- gsub("Rmd","R",file)                          # change fileextension from .rmd to r
  file_r <- str_split_fixed(file_r,"/",Inf)               # split path at /
  file_r <- append(file_r, "RFiles",length(file_r)-1)     # append Foldername "RFiles" in 2nd last pos
  file_r <- paste(file_r,collapse = "/")                  # collapse vector to string
  if(file.exists(file_r)){
    file.remove(file_r)
  }
  knitr::purl(file,documentation = 0,output = file_r)
}

```




```{r include=FALSE, message=F}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(), 'bookdown', 'knitr','forcats','carData', 'rmarkdown','tidyverse','plotly','car','ggfortify','boot','pander','scales','multicomp','ggExtra','lubridate','dplyr','purrr','readr','tidyr','tibble','ggplot2','webshot','bindrcpp','GGally','hier.part','gtools','MuMIn','nlme','lme4','languageR','lmerTest','rms','SparseM','Hmisc','Formula','survival','lattice','Matrix'
), '00_Admin/packages.bib')

```
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:index.Rmd-->

# PrePro1 (15.10.2018)

Die Datenkunde 2.0 gibt den Studierenden das Wissen und die Fertigkeiten an die Hand, selbst erhobene und bezogene Daten für Ihre eigenen Analysen vorzubereiten und anzureichern (preprocessing). Die Einheit vermittelt zentrale Datenverarbeitungskompetenzen und thematisiert bekannte Problemzonen der umweltwissenschaftlichen Datenverarbeitung – immer mit einer „hands-on“ Perspektive auf die begleitenden R-Übungen. Die Studierenden lernen die Eigenschaften ihrer Datensätze in der Fachsprache korrekt zu beschreiben. Sie lernen ausserdem Metadaten zu verstehen und die Implikationen derselben für ihre eigenen Analyseprojekte kritisch zu beurteilen. Zentrale Konzepte der Lerneinheit sind Skalenniveaus, Datentypen, Zeitdaten und Typumwandlungen.
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:09_PrePro1/Abstract.Rmd-->



## Demo: Datentypen, Tabellen
### Datentypen 
#### Numerics
##### Doubles
#### Ganzzahl / Integer 
#### Logische Abfragen 
#### Logische Operationen
#### Zeichenketten
#### `Factors`
#### Zeit/Datum
### Data Frames und Conveniance Variabeln
### Quellen

<!--chapter:end:09_PrePro1/Demo_Datentypen.Rmd-->


# Im Unterschied zu `install.packages()` werden bei `library()` keine Anführungs- 

Placeholder


## Übung A
### Aufgabe 1
### Aufgabe 2
### Aufgabe 3
### Aufgabe 4
### Aufgabe 5
### Aufgabe 6
### Aufgabe 7
### Aufgabe 8

<!--chapter:end:09_PrePro1/Uebung_A.Rmd-->

## Übung A Lösung

[R-Script als Download](09_PrePro1/RFiles/Uebung_A.R)

```{r code=readLines('09_PrePro1/RFiles/Uebung_A.R'), echo=T, eval=F}
```

```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:09_PrePro1/Uebung_A_loesung.Rmd-->


# knitr::opts_knit$set(root.dir = "09_PrePro1") 

Placeholder


## Übung B 
### Aufgabe 1
### Aufgabe 2
### Aufgabe 3

<!--chapter:end:09_PrePro1/Uebung_B.Rmd-->

## Übung B Lösung

[R-Code als Download](09_PrePro1/Uebung_B.R)

```{r code=readLines('09_PrePro1/RFiles/Uebung_B.R'), echo=T, eval=F}
```

```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:09_PrePro1/Uebung_B_loesung.Rmd-->

# PrePro2 (16.10.2018)

Die Lerneinheit vermittelt zentralste Fertigkeiten zur Vorverarbeitung von strukturierten Daten in der umweltwissenschaftlichen Forschung: Datensätze verbinden (Joins) und umformen („reshape“, „split-apply-combine“). Im Anwendungskontext haben Daten selten von Anfang an diejenige Struktur, welche für die statistische Auswertung oder für die Informationsvisualisierung erforderlich wäre. In dieser Lerneinheit lernen die Studierenden die für diese oft zeitraubenden Preprocessing-Schritte notwendigen Konzepte und R-Werkzeuge kennen und kompetent anzuwenden.
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:10_PrePro2/Abstract.Rmd-->



## Ergänzungen zu PrePro 1
### Integer mit "L"
### Arbeiten mit RStudio "Project"
### Arbeiten mit `factors`
### Heikle Annahmen - bessere Alternativen

<!--chapter:end:10_PrePro2/Nachtrag.Rmd-->


# wird zu:

Placeholder


## Demo: `tidyverse`
### Split-Apply-Combine
#### Packete laden
#### Daten Laden
#### Kennwerte berechnen
#### Convenience Variablen
#### Kennwerte nach Gruppen berechnen
#### Verketten vs. verschachteln
#### Resultate plotten
### Reshaping data
#### Breit -> lang
#### Lang -> breit
### Quellen

<!--chapter:end:10_PrePro2/Demo_Tidyverse.Rmd-->


# knitr::opts_knit$set(root.dir = "10_PrePro2") 

Placeholder


## Übung A
### Aufgabe 1
### Aufgabe 2
### Aufgabe 3
### Aufgabe 4
### Aufgabe 5
### Aufgabe 6
### Aufgabe 7
### Aufgabe 8
### Aufgabe 9

<!--chapter:end:10_PrePro2/Uebung_A.Rmd-->

## Übung A: Lösung

[R-Code als Download](10_PrePro2/RFiles/Uebung_A.R)


```{r code=readLines('10_PrePro2/RFiles/Uebung_A.R'), echo=T, eval=F, include = T}
```

```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:10_PrePro2/Uebung_A_loesung.Rmd-->


# knitr::opts_knit$set(root.dir = "10_PrePro2")

Placeholder


## Übung B
### Aufgabe 1
### Aufgabe 2
### Aufgabe 3
### Aufgabe 4

<!--chapter:end:10_PrePro2/Uebung_B.Rmd-->

## Übung B: Lösung

[R-Code als Download](10_PrePro2/RFiles/Uebung_B.R)


```{r code=readLines('10_PrePro2/RFiles/Uebung_B.R'), echo=T, eval=F, include = T}
```

```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:10_PrePro2/Uebung_B_loesung.Rmd-->

# InfoVis1 (22.10.2018)

Die konventionelle schliessende Statistik arbeitet in der Regel konfirmatorisch, sprich aus der bestehenden Theorie heraus werden Hypothesen formuliert, welche sodann durch Experimente geprüft und akzeptiert oder verworfen werden. Die Explorative Datenanalyse (EDA) nimmt dazu eine antagonistische Analyseperspektive ein und will in den Daten zunächst Zusammenhänge aufdecken, welche dann wiederum zur Formulierung von prüfbaren Hypothesen führen kann. Die Einheit stellt dazu den klassischen 5-stufigen EDA-Prozess nach Tukey (1980!) vor. Abschliessend wird dann noch die Brücke geschlagen zur modernen Umsetzung der EDA in Form von Visual Analytics.
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:11_InfoVis1/Abstract.Rmd-->


# knitr::opts_knit$set(root.dir = "11_InfoVis1") 

Placeholder


## EDA Beispiel Vorlesung
### Quellen

<!--chapter:end:11_InfoVis1/Demo_EDA.Rmd-->


# knitr::opts_knit$set(root.dir = "11_InfoVis1") 

Placeholder


## Demo: `ggplot2`
### Quellen

<!--chapter:end:11_InfoVis1/Demo_ggplot.Rmd-->


# knitr::opts_knit$set(root.dir = "11_InfoVis1") 

Placeholder


## Übung
### Aufgabe 1
### Aufgabe 2
### Aufgabe 3
### Aufgabe 4
### Aufgabe 5
### Aufgabe 6
### Aufgabe 7
### Aufgabe 8
### Aufgabe 9 (Fortgeschritten)

<!--chapter:end:11_InfoVis1/Uebung.Rmd-->

## Lösung

[RCode als Download](11_InfoVis1/RFiles/Uebung.R)


```{r code=readLines('11_InfoVis1/RFiles/Uebung.R'), echo=T, eval=F}
```
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:11_InfoVis1/Uebung_loesung.Rmd-->

# InfoVis2 (23.10.2018)

Die Informationsvisualisierung ist eine vielseitige, effektive und effiziente Methode für die explorative Datenanalyse. Während Scatterplots und Histogramme weitherum bekannt sind, bieten weniger bekannte Informationsvisualisierungs-Typen wie etwa Parallelkoordinatenplots, TreeMaps oder Chorddiagramme originelle alternative Darstellungsformen zur visuellen Analyse von Datensätze, welche stets grösser und komplexer werden. Die Studierenden lernen in dieser Lerneinheit eine Reihe von Informationsvisualisierungstypen kennen, lernen diese zielführend zu gestalten und selber zu erstellen.
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:12_InfoVis2/Abstract.Rmd-->


# knitr::opts_knit$set(root.dir = "12_InfoVis2") 

Placeholder


## Übung A
### Aufgabe 1
### Aufgabe 2
### Aufgabe 3
### Aufgabe 4
### Aufgabe 5 (für ambitionierte)
### Aufgabe 6 (für *noch* ambitioniertere)
### Aufgabe 7
### Aufgabe 8
### Aufgabe 9
### Aufgabe 10

<!--chapter:end:12_InfoVis2/Uebung_A.Rmd-->

## Übung A: Lösung

[RCode als Download](12_InfoVis2/RFiles/Uebung_A.R)

```{r code=readLines('12_InfoVis2/RFiles/Uebung_A.R'), echo=T, eval=F}
```


```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:12_InfoVis2/Uebung_A_loesung.Rmd-->


# knitr::opts_knit$set(root.dir = "12_InfoVis2") 

Placeholder


## Übung B
### Aufgabe 1: Parallel coordinate plots
### Aufgabe 2: Polar Plot mit Biber Daten
### Aufgabe 3: Polar Plot mit Passagier-Daten
### Aufgabe 4: 3D Scatterplot

<!--chapter:end:12_InfoVis2/Uebung_B.Rmd-->

## Übung B: Lösung

[RCode als Download](12_InfoVis2/RFiles/Uebung_B.R)

```{r code=readLines('12_InfoVis2/RFiles/Uebung_B.R'), echo=T, eval=F}
```

```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:12_InfoVis2/Uebung_B_loesung.Rmd-->

# Statistik 1 (29.1.2018)

In Statistik 1 lernen die Studierenden, was (Inferenz-) Statistik im Kern leistet und warum sie für wissenschaftliche Erkenntnis (in den meisten Disziplinen) unentbehrlich ist. Nach einer Wiederholung der Rolle von Hypothesen wird erläutert, wie Hypothesentests in der frequentist-Statistik umgesetzt werden, einschliesslich p-Werten und Signifikanz-Levels. Die praktische Statistik beginnt mit den beiden einfachsten Fällen, dem Chi-Quadrat-Test für die Assoziation zwischen zwei kategorialen Variablen und dem t-Test auf Unterschiede in Mittelwerten zwischen zwei Gruppen. Dann geht es um die Voraussetzungen parametrischer (und nicht-parametrischer) Tests und Optionen, wenn diese verletzt sind. Abschliessend gibt es einen ersten Einstieg in die Varianzanalyse (ANOVA).


<!-- TODO: -->
<!-- Referenzen passt noch nicht -->
<!-- hierarchien noch kontrollieren und mit anderen blöcke abgleichen -->
<!-- Beschreibung forschungsprojekte: tabelle besser als csv -->
```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:13_Statistik1/Abstract.Rmd-->


# knitr::opts_knit$set(root.dir = "13_Statistik1") 

Placeholder


## Demo: Stastische Tests
### Assoziationstests
#### Tests mit einer *breiten* (wide) Tabelle
#### Tests mit einer *langen* (long) Tabelle
### Randomisierung
#### F-Test
#### Levene Test
#### Visuelle Inspektion / Transformation
#### ANOVA mit "Blumen"-Daten
## Optional für Demo
#### ANOVA mit Gewässerdaten
##### Step 1
##### Step 2
##### Step 3
##### Step 4
### Libraries

<!--chapter:end:13_Statistik1/Demo_Tests.Rmd-->



## Beschreibung Forschungsprojekt NOVANIMAL (NFP69)
### Weitere Erläuterungen zum Datensatz

<!--chapter:end:13_Statistik1/Intro_Daten_egel.Rmd-->

## Übung A (NatWis)

###	Aufgabe 1

Datenerhebung für einen Assoziationstest zweier kategorialer Variablen, Dateneingabe und Durchführung von Chi-Quadrat- sowie Fishers exaktem Test






```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:13_Statistik1/Uebung_A.Rmd-->

## Übung B (SozOek)


###	Aufgabe 1: $\chi^2$-Test

Unterscheidet sich die novanimal-Stichprobe von der gesamten Population bezüglich Geschlecht und Hochschulzugehörigkeit? 


* Es wird angenommen, dass 15 Prozent aller Mitarbeitenden mit CampusCard weiblich sind. 16 Prozent der Population (N = 2138) sind Mitarbeiter und 37 Prozent der Population Studenten.
* Definiert die Null- ($H_0$) und die Alternativhypothese ($H_1$).
* Führt einen $\chi^2$-Test und anschliessend einen Fishers exakten Test mit dem Datensatz novanimal.csv durch.
* Fasst die Ergebnisse in einem Satz zusammen.


###	Aufgabe 2: t-Test

Werden in den Basis- und Interventionswochen unterschiedlich viele Gerichte verkauft?

* Definiert die Null- ($H_0$) und die Alternativhypothese ($H_1$).
* Führt einen t-Test mit dem Datensatz novanimal.csv durch.
* Welche Form von t-Test müssen Sie anwenden? einseitig/zweiseitig? gepaart/ungepaart?
* Wie gut sind die Voraussetzungen für einen t-Test erfüllt (Normalverteilung der Residuen und Varianzhomogenität)? Verwendet dafür ggplot2 mit classic_theme().
* Fasst die Ergebnisse in einem Satz zusammen.





```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:13_Statistik1/Uebung_B.Rmd-->


# gruppiert die Varieblen und fasst sie nach Geschlecht und Hochschulzugehörigkeit zusammen 

Placeholder


## Übung B: Lösung
###  Musterlösung Aufgabe 1
## ladet die nötigen Packete und die novanimal.csv Datei in R
## definiert mytheme für ggplot2 (verwendet dabei theme_classic())
###  Musterlösung Aufgabe 2
###  Referenzen

<!--chapter:end:13_Statistik1/Uebung_B_loesung.Rmd-->


# knitr::opts_knit$set(root.dir = "14_Statistik2")

Placeholder


## Übung B (SozOek)

<!--chapter:end:14_Statistik2/Uebung_B.Rmd-->

## Lösung



### Musterlösung Aufgabe 1: Regression (deng)

Aus @crawley2015[S. 136, modifiziert]
[R-script als Download](14_Statistik2/RFiles/Uebung_Aufgabe1.R)

```{r child = '14_Statistik2/Uebung_A_Aufgabe1.Rmd', purl=F}
```


### Musterlösung Aufgabe 2: ANOVA (deng)

[R-script als Download](14_Statistik2/RFiles/Uebung_Aufgabe2.R)

```{r child = '14_Statistik2/Uebung_A_Aufgabe2.Rmd', purl=F}
```


### Musterlösung Aufgabe 3: ANOVA (egel)
[R-script als Download](14_Statistik2/RFiles/Uebung_Aufgabe3_egel.R)

```{r child = '14_Statistik2/Uebung_B_Aufgabe1.Rmd', purl=F}
```

```{r include=FALSE, cache=FALSE}





# detach packages
packages = sapply(sessionInfo()$otherPkgs, function(x) x$Package)
packages = packages[packages != "bookdown"]
packages = sapply(packages, function(p) paste0("package:", p))
lapply(packages, detach, character.only = TRUE, unload = TRUE)
# clear environment
rm(list = ls())
```

<!--chapter:end:14_Statistik2/Uebung_loesung.Rmd-->

